FROM node:alpine

WORKDIR /usr/app

ARG JWT
ARG MAIL
ARG DB
ARG ACCESS
ARG SECRET

ENV CACB_JWT_PRIVATEKEY ${JWT}
ENV CACB_MAIL_PASSWORD ${MAIL}
ENV CACB_DB_PASSWORD ${DB}
ENV CACB_AWS_ACCESSKEY_ID ${ACCESS}
ENV CACB_AWS_SECRETKEY ${SECRET}

COPY ./package*.json ./
RUN npm install 
COPY ./ ./

CMD ["npm", "run", "start"]